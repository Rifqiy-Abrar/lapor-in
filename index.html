<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Lapor.in</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

<!-- WELCOME SECTION -->
<section id="welcomeText" class="welcome-center">
  <h1 id="welcomeText" class="welcome-title">
    Selamat Datang di Lapor.in
  </h1>

  <p class="welcome-subtitle">
    Laporkan Aspirasimu Sekarang!
  </p>

<button id="toggleBtn" class="btn-start" onclick="masuk()">
  Mulai Sekarang
</button>

</section>

<!-- HEADER BAR -->
<header class="top-header">
    <p>
      Lapor.in
    </p>
</header>

<!-- MENU SECTION -->
<section id="menu" class="content-section hidden">
  <h2 class="section-title">Mari, jelajahi layanan kami!</h2>
  <div class="cards">
    <div class="card" onclick="showSection('tentang')">
      <h3>Apa itu Lapor.in?</h3>
      <p>Platform independen untuk laporan anonim siswa.</p>
    </div>

    <div class="card" onclick="showSection('panduan')">
      <h3>Cara Menggunakan</h3>
      <p>Panduan menulis laporan yang baik dan benar.</p>
    </div>

    <div class="card highlight" onclick="showSection('kirimLaporan')">
      <h3>Kirim Laporan</h3>
      <p>Sampaikan laporan secara anonim.</p>
    </div>
    <div class="card" onclick="showSection('adminPage')">
  <h3>Admin</h3>
  <p>Lihat semua laporan</p>
</div>
  </div>
</section>

<!-- TENTANG -->
<section id="tentang" class="content-section hidden">
    <div class="content-box">
        <h2>Tentang Lapor.in</h2>
        <p>Lapor.in adalah platform independen...</p>
        <button id="toggleBtn" class="btn-start" onclick="showMenu()">Kembali</button>
    </div>
</section>

<!-- PANDUAN -->
<section id="panduan" class="content-section hidden">
    <div class="content-box">
        <h2>Panduan Menulis Laporan</h2>
        <ul>
            <li>Gunakan bahasa yang sopan.</li>
            <li>Jelaskan masalah secara jelas.</li>
            <li>Hindari menyerang individu.</li>
        </ul>
        <button id="toggleBtn" class="btn-start" onclick="showMenu()">Kembali</button>
    </div>
</section>

<!-- FORM -->
<section id="kirimLaporan" class="content-section hidden">
  <div class="form-wrapper">
      <h2>Kirim Laporan Anonim</h2>
    <form id="laporForm">
      <div class="form-group">
          <label>Kategori Laporan</label>
          <select id="kategori">
              <option value="">-- Pilih Kategori --</option>
                <option value="Fasilitas">Fasilitas</option>
                <option value="Sistem">Sistem</option>
                <option value="Lingkungan">Lingkungan</option>
                <option value="Sosial">Sosial</option>
                <option value="Lainnya">Lainnya</option>
          </select>
      </div>
      <div class="form-group">
          <label>Isi Laporan</label>
          <textarea id="isilaporan"></textarea>
      </div>

      <div class="button-group">
          <button id="toggleBtn" class="btn-start" type="submit">Kirim</button>
          <button id="toggleBtn" class="btn-start" type="button" onclick="showMenu()">Kembali</button>
      </div>
      </form>
  </div>
</section>
<!-- KONFIRMASI -->
<section id="konfirmasi" class="content-section hidden">
  <h2>Laporan Anda Telah Kami Terima</h2>
  <p>Terima kasih atas partisipasi Anda.</p>
  <button onclick="kembaliHome()">Kembali ke Beranda</button>
</section>
<!-- section admin -->
  <section id="adminPage" class="content-section hidden">
  <div class="admin-wrapper">
    <h2>Dashboard Admin</h2>

    <div id="adminList"></div>

    <button type="button" onclick="showMenu()">Kembali</button>
  </div>
</section>
  <body>

<!-- semua isi website kamu di sini -->

<script type="module">

import { initializeApp } 
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";

import { 
  getFirestore,
  collection,
  addDoc,
  getDocs,
  query,
  orderBy
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyB-6HSzNSOtX6712oy5FLZeJapmMoznqSU",
  authDomain: "lapor-in-177c1.firebaseapp.com",
  projectId: "lapor-in-177c1",
  storageBucket: "lapor-in-177c1.firebasestorage.app",
  messagingSenderId: "865694055211",
  appId: "1:865694055211:web:defa9a4557178f8b60e36e",
  measurementId: "G-9SRD40LVB4"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const form = document.getElementById("laporForm");

if (form) {
  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const kategori = document.getElementById("kategori").value;
    const isi = document.getElementById("isilaporan").value;
    try {
      await addDoc(collection(db, "laporan"), {
        kategori,
        isi,
        tanggal: new Date()
      });

      alert("Laporan berhasil dikirim");
      form.reset();
    } catch (err) {
      console.error(err);
      alert("Gagal kirim");
    }
  });
}

window.loadLaporan = async function () {
  const list = document.getElementById("adminList");
  if (!list) return;
  list.innerHTML = "Loading...";
  const q = query(
    collection(db, "laporan"),
    orderBy("tanggal", "desc")
  );

  const snap = await getDocs(q);
  list.innerHTML = "";
  snap.forEach(doc => {
    const data = doc.data();
    list.innerHTML += `
      <div class="admin-card">
        <h4>${data.kategori}</h4>
        <p>${data.isi}</p>
      </div>
    `;
  });
};

</script>
</body>
</html>



